@if(!episdoesSidebarVisible && studyZone){
  <button id="toggleModalButton" pButton pRipple class="p-button-rounded p-button-help" (click)="onToggleEpisodesModal()">
    <i class="pi pi-bars" style="font-size: 1.5rem;"></i>
  </button>
}
<div id="episodesModal" #episodesModal></div>
<p-sidebar [(visible)]="episdoesSidebarVisible" [appendTo]="episodesModal" [position]="'right'" [styleClass]="'floatSidebar lg:col-3 md:col-4'" [modal]="false" [blockScroll]="false">
  <ng-template pTemplate="header">Episodios de olor:</ng-template>
  @if(studyZone){
    <p-accordion [activeIndex]="episode?.id">
      @for( ep of studyZone.episodes; track ep; let index = $index){
        <p-accordionTab [classList]="'position-sticky'" [ngClass]="{'preview': index === previewEpisode?.id}" header="{{'Episodio ' + index}} ">
          <h5>Observaciones</h5>
          @for(obs of ep.observations; track obs; let index = $index){
            <div class="observation" [ngClass]="{ 'active' : obs.id === observation }" (click)="observationSelected(obs.id)">
              <div>
                <b>Fecha:</b> {{obs.createdAt| date:'dd/MM/yyyy hh:mm'}}<br/>
                <b>Type:</b> {{obs.relationships.odourSubType.relationships?.odourType?.name}}<br/>
                <b>Subtype:</b> {{obs.relationships.odourSubType.name}}<br/>
                <b>Hedonic Tone:</b> {{obs.relationships.odourHedonicTone?.name}}<br/>
                <b>Intensity:</b> {{obs.relationships.odourIntensity?.name}}<br/>
              </div>
            </div>
          }
        </p-accordionTab>
      }
    </p-accordion>
  }

</p-sidebar>


